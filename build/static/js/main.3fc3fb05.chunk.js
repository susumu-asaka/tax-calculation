(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(59)},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);n(34);var a=n(1),r=n(10),c=n(4),l=n(62),i=n(64),o=n(63),u=n(61),s=n(3),m=n(60);function E(e){if(e){var t=e.cityName,n=e.state;return t?t+" - "+n:n}return""}var h=n(18),d=n(24),y="/api";function p(){var e=this;return function(t,n){return c.b(e,void 0,void 0,function(){var e,a,r,l;return c.c(this,function(i){switch(i.label){case 0:if((e=n().locationsCache).isFetching||e.locations||e.error)return[3,4];t({type:"FetchTransactionsStart",reducer:function(e){return c.a({},e,{locationsCache:{isFetching:!0}})}}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,h.get(y+"/locations")];case 2:return a=i.sent(),r=a.body,t(function(e){return{type:"FetchLocationsSuccess",reducer:function(t){return c.a({},t,{locationsCache:{isFetching:!1,locations:e}})}}}(r)),[3,4];case 3:return l=i.sent(),t((o=l,{type:"FetchLocationsFailure",reducer:function(e){return c.a({},e,{locationsCache:{query:e.transactionCache.query,isFetching:!1,error:o}})}})),[3,4];case 4:return[2]}var o})})}}function g(e){var t=this;return function(n,a){return c.b(t,void 0,void 0,function(){var t,r,l,i;return c.c(this,function(o){switch(o.label){case 0:if((t=a().transactionsCache).isFetching||(t.transactions||t.error)&&d.isEqual(t.query,e))return[3,4];n(function(e){return{type:"FetchTransactionsStart",reducer:function(t){return c.a({},t,{transactionsCache:{isFetching:!0,query:e}})}}}(e)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,h.get(y+"/transactions").query(e)];case 2:return r=o.sent(),l=r.body,n(function(e){return{type:"FetchTransactionsSuccess",reducer:function(t){return c.a({},t,{transactionsCache:{query:t.transactionsCache.query,isFetching:!1,transactions:e}})}}}(l)),[3,4];case 3:return i=o.sent(),n((u=i,{type:"FetchTransactionsFailure",reducer:function(e){return c.a({},e,{transactionsCache:{query:e.transactionCache.query,isFetching:!1,error:u}})}})),[3,4];case 4:return[2]}var u})})}}function f(e){var t=this;return function(n,a){return c.b(t,void 0,void 0,function(){var t,r,l,i;return c.c(this,function(o){switch(o.label){case 0:if((t=a().transactionCache).isFetching||(t.transaction||t.error)&&d.isEqual(t.query,e))return[3,4];n(function(e){return{type:"FetchTransactionStart",reducer:function(t){return c.a({},t,{transactionCache:{isFetching:!0,query:e}})}}}(e)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,h.get(y+"/transactions").query(e)];case 2:if(r=o.sent(),0===(l=r.body).length)throw new Error("Transa\xe7\xe3o n\xe3o encontrada com\ncompanyLocation = '"+e.companyLocation+"',\ntransactionDate = '"+e.transactionDate+"',\ndocumentCode = '"+e.documentCode+"'.");return n((s=l[0],{type:"FetchTransactionSuccess",reducer:function(e){return c.a({},e,{transactionCache:{query:e.transactionCache.query,isFetching:!1,transaction:s}})}})),[3,4];case 3:return i=o.sent(),n((u=i,{type:"FetchTransactionFailure",reducer:function(e){return c.a({},e,{transactionCache:{query:e.transactionCache.query,isFetching:!1,error:u}})}})),[3,4];case 4:return[2]}var u,s})})}}var v=n(8);var b=Object(v.b)(function(e){return{locationsCache:e.locationsCache}},function(e){var t=this;return{onInit:function(){return c.b(t,void 0,void 0,function(){return c.c(this,function(t){return[2,e(p())]})})}}})(function(e){var t=e.locationsCache;(0,e.onInit)();var n=t.locations,r=t.error;return a.createElement(s.e,null,a.createElement(s.b,null,a.createElement(s.c,{active:!0},"Empresas")),!r&&!n&&a.createElement(s.a,{color:"primary"},a.createElement("h2",null,"Carregando..."),";"),r&&a.createElement(s.a,{color:"danger"},a.createElement("h2",null,"Erro"),a.createElement("p",null,r.message)),n&&a.createElement("div",null,a.createElement("h2",null,"Empresas(",n.length,")"),a.createElement("p",null,"Clique sobre uma linha para abrir as transa\xe7\xf5es da empresa desejada."),a.createElement(s.f,{style:{opacity:t.isFetching?.5:1}},n.map(function(e,t){return a.createElement(s.g,{key:t},a.createElement(m.a,{to:"/transactions?companyLocation="+e.code},a.createElement(s.j,null,a.createElement(s.d,{md:"3"},e.federalTaxId),a.createElement(s.d,{md:"3"},E(e.address)),a.createElement(s.d,{md:"3"},e.email),a.createElement(s.d,{md:"3"},e.address.phone))))}))))}),C=n(13),F=n(31);function T(e,t){return void 0===e&&(e={locationsCache:{isFetching:!1},transactionsCache:{isFetching:!1},transactionCache:{isFetching:!1}}),t.reducer?t.reducer(e):e}var x=n(11),q=n(12),D=n.n(q),L=n(32);function S(e){var t=e.name,n=e.value,r=e.currency,c=void 0===r?"BRL":r;return a.createElement("div",null,a.createElement("span",{style:{float:"left"}},a.createElement("b",null,t)),a.createElement("span",{style:{float:"right"}},n.toLocaleString("pt-BR",{style:"currency",currency:c})))}function I(e){var t=e.title,n=e.entity;return a.createElement("div",null,a.createElement("h4",null,t),n&&a.createElement("div",null,n.federalTaxId,a.createElement("br",null),E(n.address),a.createElement("br",null),n.taxRegime&&a.createElement("span",null,n.taxRegime,a.createElement("br",null)),n.type&&a.createElement("span",null,n.type,a.createElement("br",null)),n.suframa&&"Suframa: "+n.suframa))}function B(e){var t=e.transaction,n=t.header,r=n.currency,l=t.calculatedTaxSummary;return a.createElement("div",null,a.createElement(s.j,null,a.createElement(D.a,{lg:"4"},a.createElement("h3",null,n.transactionType)),a.createElement(D.a,{lg:"4"},"Data: ",L(n.transactionDate).format("DD/MM/YYYY")),a.createElement(D.a,{lg:"4"},"C\xf3digo: ",n.documentCode)),a.createElement(s.j,null,a.createElement(D.a,{lg:"4"},a.createElement(I,{title:"Empresa",entity:n.location})),a.createElement(D.a,{lg:"4"},a.createElement(I,{title:"Contraparte",entity:n.entity})),a.createElement(D.a,{lg:"4"},a.createElement("h4",null,"Resumo"),a.createElement(S,c.a({},{name:"Subtotal:",value:l.subtotal,currency:r})),a.createElement("br",null),a.createElement(S,c.a({},{name:"IEC:",value:l.taxByType.iec.tax,currency:r})),a.createElement("br",null),a.createElement(S,c.a({},{name:"IST:",value:l.taxByType.ist.tax,currency:r})),a.createElement("br",null),a.createElement(S,c.a({},{name:"ISC:",value:l.taxByType.isc.tax,currency:r})),a.createElement("br",null),a.createElement("hr",null),a.createElement(S,c.a({},{name:"TOTAL GERAL:",value:l.grandTotal,currency:r})))))}var R,j=10;function w(e){return"/transactions?"+R+"&page="+e.toString()}var k=Object(v.b)(function(e,t){var n=e.transactionsCache,a=t.location.search,r=x.parse(a);return{transactionsCache:n,page:Number(r.page||"1")}},function(e,t){var n=this,a=t.location.search,r=x.parse(a);return delete r.page,{onInit:function(){return c.b(n,void 0,void 0,function(){return c.c(this,function(t){return[2,e(g(r))]})})}}})(function(e){var t=e.page,n=e.transactionsCache;(0,e.onInit)();var r=n.transactions,l=n.error;return R=x.stringify(n.query),a.createElement(s.e,null,a.createElement(s.b,null,a.createElement(s.c,null,a.createElement(m.a,{to:"/locations"},"Empresas")),a.createElement(s.c,null,"Transa\xe7\xf5es")),!l&&!r&&a.createElement(s.a,{color:"primary"},a.createElement("h2",null,"Carregando..."),";"),l&&a.createElement(s.a,{color:"danger"},a.createElement("h2",null,"Erro"),a.createElement("p",null,l.message)),r&&a.createElement("div",null,a.createElement("h2",null,"Transa\xe7\xf5es ",(t-1)*j+1," a\xa0",Math.min(t*j,r.length)," de\xa0",r.length),a.createElement("p",null,"Clique sobre uma linha para abrir os detalhes da transa\xe7\xe3o."),a.createElement(s.f,{style:{opacity:n.isFetching?.5:1}},r.slice((t-1)*j,Math.min(t*j,r.length)).map(function(e,t){return a.createElement(s.g,{key:t},a.createElement(m.a,{to:"/transaction?companyLocation="+e.header.companyLocation+"&transactionDate="+e.header.transactionDate+"&documentCode="+e.header.documentCode},a.createElement(B,c.a({},{transaction:e}))))})),a.createElement("p",null),a.createElement(s.h,{style:{justifyContent:"center"}},a.createElement(s.i,{disabled:t<=1},a.createElement(m.a,{className:"page-link",to:w(t-1)},"\xab")),Array.from({length:Math.ceil(r.length/j)}).map(function(e,n){return a.createElement(s.i,{active:t===n+1,key:n},a.createElement(m.a,{className:"page-link",to:w(n+1)},n+1))}),a.createElement(s.i,{disabled:t>=Math.ceil(r.length/j)},a.createElement(m.a,{className:"page-link",to:w(t+1)},"\xbb")))))});function O(e){var t=e.taxDetail,n=e.currency,r=void 0===n?"BRL":n;return a.createElement("tr",null,a.createElement("th",{scope:"row"},t.taxType),a.createElement("td",null,t.jurisdictionName),a.createElement("td",null,t.scenario),a.createElement("td",{align:"right"},t.calcBase.toLocaleString("pt-BR",{style:"currency",currency:r})),a.createElement("td",{align:"right"},(100*t.rate).toLocaleString("pt-BR",{maximumFractionDigits:2})+"%"),a.createElement("td",{align:"right"},(100*(t.fact||0)).toLocaleString("pt-BR",{maximumFractionDigits:2})+"%"),a.createElement("td",{align:"right"},t.tax.toLocaleString("pt-BR",{style:"currency",currency:r})))}function M(e){var t=e.line,n=e.currency,r=void 0===n?"BRL":n,l=t.item;return a.createElement("div",null,a.createElement(s.j,null,a.createElement(s.d,{lg:"8"},a.createElement("b",null,"C\xf3digo do produto: "),l.code,a.createElement("br",null),l.description&&a.createElement("span",null,l.description,a.createElement("br",null)),l.productType,a.createElement("br",null),t.useType&&a.createElement("span",null,a.createElement("b",null,"Uso: "),t.useType,a.createElement("br",null)),t.numberOfItems&&a.createElement("span",null,a.createElement("b",null,"Quantidade: "),t.numberOfItems,a.createElement("br",null)),a.createElement("b",null,"Pre\xe7o unit\xe1rio: "),t.itemPrice.toLocaleString("pt-BR",{style:"currency",currency:r}),a.createElement("br",null),a.createElement("b",null,"CST: "),t.calculatedTax.CST),a.createElement(s.d,{lg:"4"},a.createElement(S,c.a({},{name:"Montante:",value:t.lineAmount||(t.numberOfItems||1)*t.itemPrice,currency:r})),a.createElement("br",null),a.createElement(S,c.a({},{name:"Outros custos:",value:t.otherCostAmount||0,currency:r})),a.createElement("br",null),a.createElement(S,c.a({},{name:"Desconto:",value:-(t.lineDiscount||0),currency:r})),a.createElement("br",null))),a.createElement(s.j,null,a.createElement(s.d,{lg:"12"},a.createElement(s.k,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Tipo"),a.createElement("th",null,"Jurisdi\xe7\xe3o"),a.createElement("th",null,"Cen\xe1rio"),a.createElement("th",null,"Base de c\xe1lculo"),a.createElement("th",null,"Al\xedquota"),a.createElement("th",null,"Redu\xe7\xe3o"),a.createElement("th",null,"Imposto"))),a.createElement("tbody",null,a.createElement(O,c.a({},{taxDetail:t.calculatedTax.taxDetails.iec,currency:r})),a.createElement(O,c.a({},{taxDetail:t.calculatedTax.taxDetails.ist,currency:r})),a.createElement(O,c.a({},{taxDetail:t.calculatedTax.taxDetails.isc,currency:r})))))))}var A,N=Object(v.b)(function(e){return{transactionCache:e.transactionCache}},function(e,t){var n=this,a=t.location.search,r=x.parse(a);return{onInit:function(){return c.b(n,void 0,void 0,function(){return c.c(this,function(t){return[2,e(f(r))]})})}}})(function(e){var t=e.transactionCache;(0,e.onInit)();var n=t.transaction,r=t.error;return a.createElement(s.e,null,!r&&!n&&a.createElement(s.a,{color:"primary"},a.createElement("h2",null,"Carregando..."),";"),r&&a.createElement("div",null,a.createElement(s.b,null,a.createElement(s.c,null,a.createElement(m.a,{to:"/locations"},"Empresas")),a.createElement(s.c,null,"Transa\xe7\xf5es"),a.createElement(s.c,null,"Detalhes da transa\xe7\xe3o")),a.createElement(s.a,{color:"danger"},a.createElement("h2",null,"Erro"),a.createElement("p",null,r.message))),n&&a.createElement("div",null,a.createElement(s.b,null,a.createElement(s.c,null,a.createElement(m.a,{to:"/locations"},"Empresas")),a.createElement(s.c,null,a.createElement(m.a,{to:"/transactions?companyLocation="+t.query.companyLocation},"Transa\xe7\xf5es")),a.createElement(s.c,null,"Detalhes da transa\xe7\xe3o")),a.createElement("h2",null,"Detalhes da transa\xe7\xe3o"),a.createElement(s.f,{style:{opacity:t.isFetching?.5:1}},a.createElement(s.g,null,a.createElement(B,c.a({},{transaction:n}))),n.lines.map(function(e,t){return a.createElement(s.g,{key:t},a.createElement(M,c.a({},{line:e,currency:n.header.currency})))}))))}),Y=(void 0===A&&(A={locationsCache:{isFetching:!1},transactionsCache:{isFetching:!1},transactionCache:{isFetching:!1}}),Object(C.c)(T,A,Object(C.a)(F.a)));n(57);r.render(a.createElement(function(){return a.createElement(v.a,c.a({},{store:Y}),a.createElement(l.a,null,a.createElement(i.a,null,a.createElement(o.a,{exact:!0,path:"/",render:(e="/locations",function(){return a.createElement(u.a,{to:e})})}),a.createElement(o.a,{path:"/locations",component:b}),a.createElement(o.a,{path:"/transactions",component:k}),a.createElement(o.a,{path:"/transaction",component:N}))));var e},null),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.3fc3fb05.chunk.js.map